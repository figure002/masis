<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>MaSIS: Database Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MaSIS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Marine Species Identification System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classDatabase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Database Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides methods for retrieving data from the database.  
 <a href="classDatabase.html#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Database:</div>
<div class="dyncontent">
<div class="center"><img src="classDatabase__coll__graph.png" border="0" usemap="#Database_coll__map" alt="Collaboration graph"/></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a27f4e88bfd7fcd348e0f544170fb2fbe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a27f4e88bfd7fcd348e0f544170fb2fbe"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a27f4e88bfd7fcd348e0f544170fb2fbe">connect</a> ()</td></tr>
<tr class="memdesc:a27f4e88bfd7fcd348e0f544170fb2fbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect with the PostgreSQL database. <br/></td></tr>
<tr class="memitem:a18962b53bf38e115cfca934bd2d63d3b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a18962b53bf38e115cfca934bd2d63d3b">query</a> ($query, $bind=null, $fetch= 'FETCH_ASSOC')</td></tr>
<tr class="memdesc:a18962b53bf38e115cfca934bd2d63d3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new database prepared query.  <a href="#a18962b53bf38e115cfca934bd2d63d3b"></a><br/></td></tr>
<tr class="memitem:af7bc1f009ae4cfec8a19ce4c1cc0a43a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#af7bc1f009ae4cfec8a19ce4c1cc0a43a">get_image_attributes</a> ($dir, $filename)</td></tr>
<tr class="memdesc:af7bc1f009ae4cfec8a19ce4c1cc0a43a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the attributes for an image file.  <a href="#af7bc1f009ae4cfec8a19ce4c1cc0a43a"></a><br/></td></tr>
<tr class="memitem:a6cf70f0c423b4b32d9b2825c74152da4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a6cf70f0c423b4b32d9b2825c74152da4">get_files_for_dir</a> ($dir)</td></tr>
<tr class="memdesc:a6cf70f0c423b4b32d9b2825c74152da4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the list of image file names for an image directory.  <a href="#a6cf70f0c423b4b32d9b2825c74152da4"></a><br/></td></tr>
<tr class="memitem:a0fa69e8599adb5307cfc552ac9bf2c0d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a0fa69e8599adb5307cfc552ac9bf2c0d">cache_aphia_records</a> ($records, $update=true)</td></tr>
<tr class="memdesc:a0fa69e8599adb5307cfc552ac9bf2c0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Caches the records retrieved from the online WoRMS database.  <a href="#a0fa69e8599adb5307cfc552ac9bf2c0d"></a><br/></td></tr>
<tr class="memitem:a5972a2838b98ed0b7816a528ac823bec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a5972a2838b98ed0b7816a528ac823bec">get_species_matching</a> ($term, $limit=20)</td></tr>
<tr class="memdesc:a5972a2838b98ed0b7816a528ac823bec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of species names matching the search term.  <a href="#a5972a2838b98ed0b7816a528ac823bec"></a><br/></td></tr>
<tr class="memitem:a9549b0da67a3ad1f6e2f569d67e107ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a9549b0da67a3ad1f6e2f569d67e107ec">get_substrate_types</a> ()</td></tr>
<tr class="memdesc:a9549b0da67a3ad1f6e2f569d67e107ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return all substrate types.  <a href="#a9549b0da67a3ad1f6e2f569d67e107ec"></a><br/></td></tr>
<tr class="memitem:a9470debaa4dbabb3fb87f48c8bece98b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a9470debaa4dbabb3fb87f48c8bece98b">get_image_tag_types</a> ()</td></tr>
<tr class="memdesc:a9470debaa4dbabb3fb87f48c8bece98b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return all image tag types.  <a href="#a9470debaa4dbabb3fb87f48c8bece98b"></a><br/></td></tr>
<tr class="memitem:a231a45ee6f3292841b5b1272d5fac725"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a231a45ee6f3292841b5b1272d5fac725">get_vectors</a> ($image_id)</td></tr>
<tr class="memdesc:a231a45ee6f3292841b5b1272d5fac725"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return all vectors for an image.  <a href="#a231a45ee6f3292841b5b1272d5fac725"></a><br/></td></tr>
<tr class="memitem:a9cbb05bd40bab06c6d1900b9e1905613"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a9cbb05bd40bab06c6d1900b9e1905613">save_vectors</a> ($vectors)</td></tr>
<tr class="memdesc:a9cbb05bd40bab06c6d1900b9e1905613"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save vectors to the database.  <a href="#a9cbb05bd40bab06c6d1900b9e1905613"></a><br/></td></tr>
<tr class="memitem:a764fbabef33fae2ff24290462d954a99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a764fbabef33fae2ff24290462d954a99">delete_vector</a> ($image_id, $vector_id)</td></tr>
<tr class="memdesc:a764fbabef33fae2ff24290462d954a99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a vector from the database.  <a href="#a764fbabef33fae2ff24290462d954a99"></a><br/></td></tr>
<tr class="memitem:a0fba6ad55208137b25381d4b73954c2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a0fba6ad55208137b25381d4b73954c2c">set_areas_image_grouped</a> ()</td></tr>
<tr class="memdesc:a0fba6ad55208137b25381d4b73954c2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncate and populate table <code>areas_image_grouped</code>.  <a href="#a0fba6ad55208137b25381d4b73954c2c"></a><br/></td></tr>
<tr class="memitem:afa6f84f0b79f0be0b4a81e9898c2b3e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#afa6f84f0b79f0be0b4a81e9898c2b3e7">set_areas</a> ()</td></tr>
<tr class="memdesc:afa6f84f0b79f0be0b4a81e9898c2b3e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the area for all records in table <code>image_info</code>.  <a href="#afa6f84f0b79f0be0b4a81e9898c2b3e7"></a><br/></td></tr>
<tr class="memitem:a4e89aa8e1053f8753a22572f65e0d2be"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a4e89aa8e1053f8753a22572f65e0d2be">set_annotation_status</a> ($image_id, $status)</td></tr>
<tr class="memdesc:a4e89aa8e1053f8753a22572f65e0d2be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the annotation status for an image.  <a href="#a4e89aa8e1053f8753a22572f65e0d2be"></a><br/></td></tr>
<tr class="memitem:adf48d605dd4622b07cc9a7f548cc5917"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#adf48d605dd4622b07cc9a7f548cc5917">get_substrate_annotations</a> ($image_id)</td></tr>
<tr class="memdesc:adf48d605dd4622b07cc9a7f548cc5917"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the substrate annotations for an image.  <a href="#adf48d605dd4622b07cc9a7f548cc5917"></a><br/></td></tr>
<tr class="memitem:a1e9b6dcb97dbec39092dc887db9242b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a1e9b6dcb97dbec39092dc887db9242b2">get_image_tags</a> ($image_id)</td></tr>
<tr class="memdesc:a1e9b6dcb97dbec39092dc887db9242b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the tags for an image.  <a href="#a1e9b6dcb97dbec39092dc887db9242b2"></a><br/></td></tr>
<tr class="memitem:a241720daf5ac8d79ce1283898c0a7da3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a241720daf5ac8d79ce1283898c0a7da3">set_substrate_annotations</a> ($image_id, $annotations)</td></tr>
<tr class="memdesc:a241720daf5ac8d79ce1283898c0a7da3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the substrate annotations for an image.  <a href="#a241720daf5ac8d79ce1283898c0a7da3"></a><br/></td></tr>
<tr class="memitem:a19ba63b5a89bb24232cd474c54b4f731"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a19ba63b5a89bb24232cd474c54b4f731">set_image_tags</a> ($image_id, $tags)</td></tr>
<tr class="memdesc:a19ba63b5a89bb24232cd474c54b4f731"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set tags for an image.  <a href="#a19ba63b5a89bb24232cd474c54b4f731"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af7c7304034efe8fd0b7f9d8b8ad63acc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af7c7304034efe8fd0b7f9d8b8ad63acc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#af7c7304034efe8fd0b7f9d8b8ad63acc">$dbh</a> = null</td></tr>
<tr class="memdesc:af7c7304034efe8fd0b7f9d8b8ad63acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The PDO database handler. <br/></td></tr>
<tr class="memitem:a502df1b3553fedfb4eb93788e9008294"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a502df1b3553fedfb4eb93788e9008294"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#a502df1b3553fedfb4eb93788e9008294">$aphia_status_exclude</a> = array('nomen dubium','nomen nudum','deleted')</td></tr>
<tr class="memdesc:a502df1b3553fedfb4eb93788e9008294"><td class="mdescLeft">&#160;</td><td class="mdescRight">Skip records with an Aphia status set in this variable. <br/></td></tr>
<tr class="memitem:aac282092ecb7f4f3862af28726d18f6e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aac282092ecb7f4f3862af28726d18f6e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html#aac282092ecb7f4f3862af28726d18f6e">$tags_image_unusable</a> = array('unusable','cannot see seafloor','altitude too high')</td></tr>
<tr class="memdesc:aac282092ecb7f4f3862af28726d18f6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Images with these tags are considered unusable. <br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Provides methods for retrieving data from the database. </p>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00006">6</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>
</div><h2>Member Function Documentation</h2>
<a class="anchor" id="a0fa69e8599adb5307cfc552ac9bf2c0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::cache_aphia_records </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$update</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Caches the records retrieved from the online WoRMS database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"></td><td class="paramname">$records</td><td>The records object returned by the SOAP function getAphiaRecords*() </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$update</td><td>Whether to update existing records in the database. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00180">180</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a764fbabef33fae2ff24290462d954a99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::delete_vector </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$image_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$vector_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a vector from the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$image_id</td><td>The unique identifier for an image in the database. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$vector_id</td><td>The ID of the vector that will be deleted. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00477">477</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a6cf70f0c423b4b32d9b2825c74152da4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::get_files_for_dir </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the list of image file names for an image directory. </p>
<p>The list of file names is obtained from the database for the specified image directory name. In addition to file name also annotation status, vector count, boolean substrate annotated, and image tags are returned. This function is used to show a file list for a directory in the photo library.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$dir</td><td>The name of the image directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A PDO statement handler. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00150">150</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="af7bc1f009ae4cfec8a19ce4c1cc0a43a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::get_image_attributes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the attributes for an image file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$dir</td><td>Directory name for the image file. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$filename</td><td>File name of the image file (e.g. 004624.jpeg). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>float $altitude Altitude at which the photo was taken. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00105">105</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a9470debaa4dbabb3fb87f48c8bece98b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::get_image_tag_types </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return all image tag types. </p>
<dl class="section return"><dt>Returns</dt><dd>A PDO statement handler. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00333">333</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a1e9b6dcb97dbec39092dc887db9242b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::get_image_tags </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$image_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the tags for an image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$image_id</td><td>The id for the image </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A PDO statement handler. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00639">639</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5972a2838b98ed0b7816a528ac823bec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::get_species_matching </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$limit</em> = <code>20</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a list of species names matching the search term. </p>
<p>This method can be used for the Autocomplete feature of jQuery UI.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$term</td><td>The keyword to match against species names in the database. </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$limit</td><td>The maximum number of records to return (defaults to 20). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A PDO statement handler. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00296">296</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="adf48d605dd4622b07cc9a7f548cc5917"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::get_substrate_annotations </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$image_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the substrate annotations for an image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$image_id</td><td>The id for the image </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A PDO statement handler. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00619">619</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a9549b0da67a3ad1f6e2f569d67e107ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::get_substrate_types </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return all substrate types. </p>
<dl class="section return"><dt>Returns</dt><dd>A PDO statement handler. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00317">317</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a231a45ee6f3292841b5b1272d5fac725"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::get_vectors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$image_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return all vectors for an image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$image_id</td><td>The image ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A PDO statement handler. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00350">350</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a18962b53bf38e115cfca934bd2d63d3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::query </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bind</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fetch</em> = <code>'FETCH_ASSOC'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new database prepared query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$query</td><td>The prepared statement query to the database </td></tr>
    <tr><td class="paramtype">array&#160;|&#160;string</td><td class="paramname">$bind</td><td>All the variables to bind to the prepared statement </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The return value of this function on success depends on the fetch type. In all cases, FALSE is returned on failure. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00048">48</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a9cbb05bd40bab06c6d1900b9e1905613"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::save_vectors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$vectors</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save vectors to the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Array</td><td class="paramname">$vectors</td><td>An array of vector arrays. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A PDO statement handler. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00376">376</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4e89aa8e1053f8753a22572f65e0d2be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::set_annotation_status </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$image_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the annotation status for an image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$image_id</td><td>The id for the image (image_info.id). </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$status</td><td>The status, e.g. 'incomplete' or 'complete'. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00578">578</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="afa6f84f0b79f0be0b4a81e9898c2b3e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::set_areas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the area for all records in table <code>image_info</code>. </p>
<p>Records that already have the area set are skipped.</p>
<dl class="section return"><dt>Returns</dt><dd>int The number of updated records. </dd></dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00537">537</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a0fba6ad55208137b25381d4b73954c2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::set_areas_image_grouped </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Truncate and populate table <code>areas_image_grouped</code>. </p>
<p>This table contains the species coverage per image. The overall coverage for each species can be calculated using this table.</p>
<p>This function needs to be executed after vectors in the <code>vectors</code> table have been updated in order to get up-to-date coverage data. </p>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00500">500</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a19ba63b5a89bb24232cd474c54b4f731"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::set_image_tags </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$image_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set tags for an image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$image_id</td><td>The id for the image </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$tags</td><td>Array of strings/tag names </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00706">706</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<a class="anchor" id="a241720daf5ac8d79ce1283898c0a7da3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::set_substrate_annotations </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$image_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$annotations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the substrate annotations for an image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$image_id</td><td>The id for the image </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$annotations</td><td>Associative array of the annotations. The keys are the category-list element ID's, the values are arrays of strings/substrate types. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Database_8php_source.html#l00661">661</a> of file <a class="el" href="Database_8php_source.html">Database.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>includes/<a class="el" href="Database_8php_source.html">Database.php</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 12 2012 14:55:58 for MaSIS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
